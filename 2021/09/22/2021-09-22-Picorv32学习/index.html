<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" >
    <meta http-equiv="X-UA-Compatible" content="IE=11,IE=10,IE=9,IE=8" >
    <meta name="baidu-site-verification" content="dIcXMeY8Ya" />
    
    <title>Picorv32学习 | Hexo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" >
    <meta name="keywords" content="Jelon, 前端, Web, 张德龙, 前端开发" >
    <meta name="description" content="Jelon个人前端小站" >

    
    <link rel="alternative" href="/atom.xml" title="Hexo" type="application/atom+xml" >
    
    
    <link rel="icon" href="/favicon.ico" >
    
    
<link rel="stylesheet" href="/css/style.css?v=1635328786150.css">

    <!--[if lt IE 9]>
    
<script src="/js/html5.js"></script>

    <![endif]-->
    

<meta name="generator" content="Hexo 5.4.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style></head>

<body class="home">
    <!--[if lt IE 9]>
    <div class="browsehappy">
        当前网页 <strong>不支持</strong>
        你正在使用的浏览器. 为了正常的访问, 请 <a target="_blank" rel="noopener" href="http://browsehappy.com/">升级你的浏览器</a>.
    </div>
    <![endif]-->

    <!-- 博客头部 -->
    <header class="header">
    <section class="container header-main">
        <div class="logo">
            <a href="/">
                <div class="cover">
                    <span class="name">Hexo</span>
                    <span class="description"></span>
                </div>
            </a>
        </div>
        <div class="dropnav iconfont icon-nav" id="JELON__btnDropNav"></div>
        <ul class="menu hidden" id="JELON__menu">
            
            <li rel="/2021/09/22/2021-09-22-Picorv32%E5%AD%A6%E4%B9%A0/index.html" class="item ">
                <a href="/" title="首页" class="iconfont icon-home">&nbsp;首页</a>
            </li>
            
            <li rel="/2021/09/22/2021-09-22-Picorv32%E5%AD%A6%E4%B9%A0/index.html" class="item ">
                <a href="/archives/" title="归档" class="iconfont icon-archives">&nbsp;归档</a>
            </li>
            
            <li rel="/2021/09/22/2021-09-22-Picorv32%E5%AD%A6%E4%B9%A0/index.html" class="item ">
                <a href="/about/" title="关于" class="iconfont icon-staff">&nbsp;关于</a>
            </li>
            
            <li rel="/2021/09/22/2021-09-22-Picorv32%E5%AD%A6%E4%B9%A0/index.html" class="item ">
                <a href="/comment/" title="留言" class="iconfont icon-comment">&nbsp;留言</a>
            </li>
            
        </ul>
        <div class="profile clearfix">
            <div class="feeds fl">
                
                
                <p class="links">
                    
                        <a href="https://github.com/elike-ypq" target="_blank">Github</a>
                        |
                    
                        <a href="https://pages.coding.me" target="_blank">Hosted by Coding Pages</a>
                        
                    
                </p>
                <p class="sns">
                    
                        <a href="http://weibo.com/jangdelong" class="sinaweibo" target="_blank"><b>■</b> 新浪微博</a>
                    
                        <a href="https://juejin.im/user/3984285869282919" class="qqweibo" target="_blank"><b>■</b> 掘金</a>
                    
                    <a href="javascript: void(0);" class="wechat">
                        <b>■</b>
                        公众号
                        <span class="popover">
                            <img src="/img/wechat_mp.jpg" width="120" height="120" alt="我的微信订阅号">
                            <i class="arrow"></i>
                        </span>
                    </a>
                </p>
                
            </div>
            <div class="avatar fr">
                <img src="/img/jelon.jpg" alt="avatar" title="Jelon" >
            </div>
        </div>
    </section>
</header>


    <!-- 博客正文 -->
    <div class="container body clearfix">
        <section class="content">
            <div class="content-main widget">
                <!-- 文章页 -->
<!-- 文章 -->
<article class="post article">
    <header class="text-center">
        <h3 class="post-title"><span>Picorv32学习</span></h3>
    </header>
    <p class="post-meta text-center">
        elike 发表于
        <time datetime="2021-09-21T16:00:00.000Z">2021-09-22</time>
    </p>
    <div id="JELON__articlePostContent" class="post-content">
        <p>基本特性介绍</p>
<p>Picorv32 是一个基于RISCV基本指令级设计的一个CPU内核，它能实现RV32E, RV32I, RV32IC, RV32IM，或RV32IMC多种核心配置，还支持内部中断控制。这个内核有一下几种特征</p>
<ul>
<li>门数少，占用的硬件资源少。（在7系列的Xlinx的FPGA中，综合后仅占用750~2000 个LUT）</li>
<li>可以工作在较高的频率。在7系列FPGA上，可以支持高达750MHz的时钟频率。</li>
<li>可选本地内存接口和轻量级AXI4 master总线</li>
<li>可选的终端请求</li>
<li>可选多核处理接口</li>
<li>在使用的时候，由于整个内核只有一个时钟域，它能很方便地嵌入整个SOC，而且能在非常低的频率下工作。</li>
</ul>
<p>在整个内核结构中，单个picorv32.v实现了整个RISCV内核，我们可以在这个文件中方便配置内核，以满足自己的要求。</p>
<p>1 EN_COUNTERS (default = 1)</p>
<p>使能RDCYCLE[H], RDTIME[H], 和RDINSTRET[H]指令</p>
<p>2 EN_COUNTERS64 (default = 1)</p>
<p>使能RDCYCLEH, RDTIMEH, RDINSTRETH指令。 如果EN_COUNTERS64=0, EN_COUNTERS=1, 系统仅支持RDCTCLE, RDTIME, RDINSTRET指令。</p>
<p>3 ENABLE_REGS_16_31 (default = 1)</p>
<p>使能寄存器的高16位x16..x31，将其设置为0，可以实现RV32E ISA。然而，在RV32E ISA spec中，当处理器想要获取这些地址的信息时，会进入一个硬件的死循环，而在Picorv32中没有实现。</p>
<p>4 ENABLE_REGS_DUALPORT (default = 1)</p>
<p>我们可以通过这个设置处理器从内存中取数据的端口数量，内存接口通常有单端和双端的区别。双端口的内存端口可以提高内存的访问速率，从而提高降低内存访问延迟。如果配置成双端口的接口，会增大芯片的面积。</p>
<p>5 LATCHED_MEM_RDATA (default = 0 )</p>
<p>LATCHED_MEM_RDATA = 1时，在经历过一次数据传输后，<code>mem_rdata</code> 寄存器中的数据将会保持下去。在默认配置中，Picorv32只期望在 <code>mem_valid &amp;&amp; mem_ready = 1</code>时<code>mem_rdata</code>有效，并且从内部锁定当前值。这个配置在<code>picorv32</code>核内有效，在<code>picorv32_axi</code> 和<code>picorv32_wb</code>核中会隐含置为0。</p>
<p>6 TWO_STAGE_SHIFT (default = 1 )</p>
<p>在默认情况下，移位操作被拆分成了两个步骤：首先是以4bit为一个单位进行移位，接着1bit一个单位进行移位。这样能提高移位速率，但同时增加了硬件开销。我们可以把它设置成零，从而进一步减小芯片的面积。</p>
<p>7 BARREL_SHIFTER (default =0 )</p>
<p>默认的的移位操作是是将移位分解为多个较小的移位来实现的（如TWO_STAGE_SHIFT中描述的）。当它设置为1时，移位操作可以一步到位。</p>
<p>8 TWO_CYCLE_COMPARE (default = 0)</p>
<p>通过在最长的数据传输路径中添加额外的边沿触发器，将其分为两个时钟周期实现数据传输，保证数据传输可靠性。</p>
<p><em>Note: Enabling this parameter will be most effective when retiming (aka”register balancing”) is enabled in the synthesis flow.</em></p>
<p>9 TWO_CYCLE_ALU (default = 0)</p>
<p>在ALU的数据路径中插入边沿触发器， 改善所有指令使用ALU的时间开销。</p>
<p><em>Note: Enabling this parameter will be most effective when retiming (aka “register balancing”) is enabled in the synthesis flow.</em></p>
<p>10 COMPRESSED_ISA (default =0 )</p>
<p>使能RISC-V 压缩指令集。（dhrystone测试的时候，需要将其配置为1）</p>
<p>11 CATCH_MISALIGN (default = 1)</p>
<p>将其设置为0可以禁用捕获非对齐内存读取电路。</p>
<p>12 CATCH_ILLINSN (default = 1)</p>
<p>设置为0禁用捕获非法指令的电路</p>
<p>将其设置为0时，此核心仍然会进入 <code>EBREAK</code>指令的死循环中。当使能IRQs时，正常状态下CATCH_ILLINSN =1，<code>EBREAK</code>会触发 IRQ 1。而将其设置为0时，<code>EBREAK</code>将不会触发系统中断。</p>
<p>13 ENABLE_PCPI (default = 0)</p>
<p>使能多核处理接口。</p>
<p>14 ENABLE_MUL (default = 0)</p>
<p>使能PCPI，并且实例化 <code>picorv32_pcpi_mul</code>核，实现<code>MUL[H[SU|U]]</code>指令。当ENABEL_PCPI=1时，外部的PCPI总线才会有效。</p>
<p>15 ENABLE_FAST_MUL (default =0 )</p>
<p>使能PCPI，并且实例化 <code>picorv32_pcpi_fast_mul</code>核，实现<code>MUL[H[SU|U]]</code>指令。当ENABEL_PCPI=1时，外部的PCPI总线才会有效。当ENABLE_MUL 和 ENABLE_FAST_MUL都设置为1时，ENABLE_MUL将会被忽略。</p>
<p>16 ENABLE_DIV (default = 0)</p>
<p>使能PCPI，并且实例化 <code>picorv32_pcpi_div核，实现</code>DIV[U]/REM[U]`指令。当ENABEL_PCPI=1时，外部的PCPI总线才会有效。</p>
<p>17 ENABLE_IRQ (default = 0)</p>
<p>使能IRQs.</p>
<p>18 ENABLE_IRQ_QREGS (default = 1)</p>
<p>设置为0禁止对<code>getq</code>和<code>setq</code>指令的支持。根据RISC-V ABI，当没有<code>q</code>寄存器时，<code>irq</code>返回地址将会被存储在<code>x3(gp)</code>和<code>x4</code>的IRQ bitmask，全局指针和线程指针寄存器。由普通C语言生成的代码将不会与以上的寄存器发生交互。</p>
<p>当ENABLE_IRQ = 0 时， q寄存器默认无效。</p>
<p>19 ENABLE_IRQ_TIMER (default = 1)</p>
<p>设置为0， 可以禁用<code>timer</code>指令。</p>
<p>当ENABLE_IRQ = 0 时，timer寄存器默认无效。</p>
<p>20 ENABLE_TRACE (default = 0)</p>
<p>使用<code>trace_valid</code>和<code>trace_data</code>输出端口生成执行跟踪。使用<code>make test_vcd</code>可以生成跟踪文件<code>*.trace</code>，再执行 <code>python3 showtrace.py testbench.trace firmware/firmware.elf</code> 进行解码。</p>
<p>21 REGS_INIT_ZERO (default = 0)</p>
<p>设置为1可以初始化所以的寄存器为0 (使用 Verilog 的 <code>initial</code> 块)。</p>
<p>22 MASKED_IRQ (default = 32’h 0000_0000)<br>这个位掩码中的1位对应一个永久禁用的IRQ。</p>
<p>23 LATCHED_IRQ (default = 32’h ffff_ffff)</p>
<p>位掩码中的一位对应一个IRQ 被锁定。 例如，当IRQ线只有一个周期是高电平时，中断将被标记为挂起，并一直挂起，直到中断处理程序被调用(又名“脉冲中断”或“边缘触发中断”)。</p>
<p>设置位掩码其中一位为0， 可以对应设置中断线工作在电平敏感型中断模式。</p>
<p>24 PROGADDR_RESET (default = 32’h 0000_0000)</p>
<p>程序的起始地址。</p>
<p>25 PROGADDR_IRQ (default = 32’h 0000_0010)</p>
<p>中断句柄的起始地址。</p>
<p>26 STACKADDR (default = 32’h ffff_ffff)</p>
<p>当这个参数有一个不同于0xffffffff的值时，那么寄存器<code>x2 </code>(堆栈指针)在重置时被初始化为这个值。(所有其他寄存器保持未初始化。)注意，RISC-V调用约定要求堆栈指针按16字节边界对齐(RV32I软浮点调用约定为4字节)。</p>

    </div>
    <p class="eof">-- EOF --</p>
    <p class="post-meta">
        <span class="post-cat">分类：
            <a class="cat-link" href="/categories/RISC-V/">RISC-V</a>
        </span>
        <span class="post-tags">
            标签：
            
    
        <a href="/tags/Verilog/" title="Verilog">Verilog</a> / 
    
        <a href="/tags/Digital-Circuit/" title="Digital Circuit">Digital Circuit</a> / 
    
        <a href="/tags/RISC-V/" title="RISC-V">RISC-V</a>
    

        </span>
    </p>
</article>
<!-- 分享按钮 -->

  <div class="article-share clearfix text-center">
    <div class="share-area">
      <span class="share-txt">分享到：</span>
      <a href="javascript: window.open('http://service.weibo.com/share/share.php?url=' + encodeURIComponent(location.href) + '&title=' + document.title + '&language=zh_cn');" class="share-icon weibo"></a>
      <a href="javascript: alert('请复制链接到微信并发送');" class="share-icon wechat"></a>
      <a href="javascript: window.open('http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=' + encodeURIComponent(location.href) + '&title=' + document.title);" class="share-icon qqzone"></a>
      <a href="javascript: window.open('http://connect.qq.com/widget/shareqq/index.html?url=' + encodeURIComponent(location.href) + '&desc=Jelon个人博客&title=' + document.title + '&callback=' + encodeURIComponent(location.href));" class="share-icon qq"></a>
      <a href="javascript: window.open('http://shuo.douban.com/!service/share?href=' + encodeURIComponent(location.href) + '&name=' + document.title + '&text=' + document.title);" class="share-icon douban"></a>
    </div>
  </div>


<!-- 上一篇/下一篇 -->

<div class="article-nav clearfix">
    
    <span class="prev fl">
        上一篇<br >
        <a href="/2021/09/25/2021-09-25-%E5%BC%80%E5%85%B3%E7%94%B5%E5%AE%B9%E6%94%BE%E5%A4%A7%E5%99%A8%E5%99%AA%E5%A3%B0%E8%AE%A1%E7%AE%97/">
            
                开关电容放大器噪声计算
            
        </a>
    </span>
    

    
    <span class="next fr">
        下一篇<br >
        <a href="/2021/07/27/2021-07-27-Superconducting-quantum-processor/">
            
                Superconducting quantum processor
            
        </a>
    </span>
    
</div>

<!-- 文章评论 -->
<head>
  <!-- style sheet of Vssue -->
  <link rel="stylesheet" href="https://unpkg.com/vssue/dist/vssue.min.css">
</head>

<body>
  <div id="vssue"></div>

  <!-- Introduce Vue first -->

  <!-- vue runtime build (runtime only)  -->
  <script src="https://unpkg.com/vue/dist/vue.runtime.min.js"></script>
  <!-- OR: vue full build (runtime + compiler)  -->
  <script src="https://unpkg.com/vue/dist/vue.min.js"></script>

  <!-- Introduce Vssue after Vue -->

  <!-- Vssue Github build -->
  <script src="https://unpkg.com/vssue/dist/vssue.github.min.js"></script>
  <!-- OR: Vssue Gitlab build -->
  <script src="https://unpkg.com/vssue/dist/vssue.gitlab.min.js"></script>
  <!-- OR: Vssue Bitbucket build -->
  <script src="https://unpkg.com/vssue/dist/vssue.bitbucket.min.js"></script>
  <!-- OR: Vssue Gitee build -->
  <script src="https://unpkg.com/vssue/dist/vssue.gitee.min.js"></script>
  <!-- OR: Vssue Gitea build -->
  <script src="https://unpkg.com/vssue/dist/vssue.gitee.min.js"></script>

  <!-- Use Vssue as a Vue component -->

  <!-- use render function for vue runtime build -->
  <script>
    new Vue({
      el: '#vssue',

      render: h => h('Vssue', {
        props: {
          // here set the title of issue of current page
          title: 'Vssue Dev',

          // here set the options for your OAuth App
          options: {
            owner: 'elike_098',
            repo: 'blog_comments',
            clientId: '8ff480507548e17ad77f7318e6663d04cb64bc2b2bc1307c79f0f96d8ca07241',
            clientSecret: '2db7ac171e4edc0daa7eaba990f4baa743a1fb3b1baaf95398dc5f044f40d4b3',
          },
        }
      })
    })
  </script>
</body>


            </div>
        </section>
        <!-- 侧栏部分 -->
<aside class="sidebar">
    
    <section class="widget">
        <h3 class="widget-hd"><strong>文章搜索</strong></h3>
        <div class="search-form">
  <form
    id="searchForm"
    method="GET"
    action="https://www.baidu.com/s"
    ectype="application/x-www-form-urlencoded"
    target="_blank"
    autocomplete="false"
    onsubmit="javascript: return false;">
    <input
      id="searchKeyword"
      type="text"
      class="form-control"
      placeholder="输入关键字搜索"
      autocomplete="false"
    />
    <input id="searchKeywordHidden" type="hidden" name="wd" />
    <input id="searchButton" class="btn" type="submit" value="搜索" />
  </form>
</div>
    </section>
    

    <section class="widget">
        <h3 class="widget-hd"><strong>文章分类</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
    <li>
        <a href="/categories/Circuit/">Circuit</a>
        <span class="badge">(5)</span>
    </li>
    
    <li>
        <a href="/categories/Circuit/Noise/">Noise</a>
        <span class="badge">(4)</span>
    </li>
    
    <li>
        <a href="/categories/quantum-processor/">quantum processor</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/RISC-V/">RISC-V</a>
        <span class="badge">(1)</span>
    </li>
    
    <li>
        <a href="/categories/Theory/">Theory</a>
        <span class="badge">(1)</span>
    </li>
    
</ul>
    </section>

    
    <section class="widget">
        <h3 class="widget-hd"><strong>热门标签</strong></h3>
        <!-- 文章标签 -->
<div class="widget-bd tag-wrap">
  
    <a class="tag-item" href="/tags/Switch-Capacitor/" title="Switch Capacitor">Switch Capacitor (5)</a>
  
    <a class="tag-item" href="/tags/Analysis/" title="Analysis">Analysis (5)</a>
  
    <a class="tag-item" href="/tags/Circuit-Design/" title="Circuit Design">Circuit Design (5)</a>
  
    <a class="tag-item" href="/tags/LFSR/" title="LFSR">LFSR (1)</a>
  
    <a class="tag-item" href="/tags/Verilog/" title="Verilog">Verilog (1)</a>
  
    <a class="tag-item" href="/tags/Digital-Circuit/" title="Digital Circuit">Digital Circuit (1)</a>
  
    <a class="tag-item" href="/tags/Superconducting/" title="Superconducting">Superconducting (1)</a>
  
    <a class="tag-item" href="/tags/quantum-processor/" title="quantum processor">quantum processor (1)</a>
  
    <a class="tag-item" href="/tags/Example/" title="Example">Example (1)</a>
  
    <a class="tag-item" href="/tags/RISC-V/" title="RISC-V">RISC-V (1)</a>
  
    <a class="tag-item" href="/tags/Noise/" title="Noise">Noise (1)</a>
  
    <a class="tag-item" href="/tags/Amplifier/" title="Amplifier">Amplifier (1)</a>
  
</div>
    </section>
    

    

    
    <!-- 友情链接 -->
    <section class="widget">
        <h3 class="widget-hd"><strong>友情链接</strong></h3>
        <!-- 文章分类 -->
<ul class="widget-bd">
    
        <li>
            <a href="https://github.com/front-end-pigs/blog" target="_blank" title="Github博客">Github博客</a>
        </li>
    
        <li>
            <a href="https://jelon.info" target="_blank" title="Jelon博客">Jelon博客</a>
        </li>
    
</ul>
    </section>
    
</aside>
<!-- / 侧栏部分 -->
    </div>

    <!-- 博客底部 -->
    <footer class="footer">
    &copy;
    
        2014-2021
    

    <a href="/">Jelon Loves You</a>
</footer>
<div class="back-to-top" id="JELON__backToTop" title="返回顶部">返回顶部</div>

    <!--博客js脚本 -->
    <!-- 这里放网站js脚本 -->

<script src="/js/main.js?v=1635328786151.js"></script>


</body>
</html>
